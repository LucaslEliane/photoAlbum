!function(e){"use strict";function t(){this.LAYOUT={PUZZLE:1,WATERFALL:2,BARREL:3},this.init()}var a,n,s,l,i,r,o=[],c=3,d=[],u=[];t.prototype.init=function(){this.getAlbumElement(),this.imageColumn(c),this.createOverlay(),this.initAppendImage()},t.prototype.getAlbumElement=function(){var e;document.getElementsByClassName&&document.getElementsByClassName("lucas-album")[0]&&(a=document.getElementsByClassName("lucas-album")[0]),document.querySelectorAll&&0!==document.querySelectorAll(".lucas-album img").length&&(e=document.querySelectorAll(".lucas-album img"));for(var t=0;t<e.length;t++)o[t]=e[t].getAttribute("src"),a.removeChild(e[t]);s=this.LAYOUT[a.getAttribute("category")],n=o.length},t.prototype.addClass=function(e,t){var a,n="";e.getAttribute("class")?(a=e.getAttribute("class").split(" "),a.forEach(function(e){e!==t&&(n=n+" "+e)}),n=n.trim(),n=n+" "+t,e.setAttribute("class",n)):e.setAttribute("class",t)},t.prototype.removeClass=function(e,t){var a;e.getAttribute("class")&&(a=e.getAttribute("class"),a=a.replace(t,""),e.setAttribute("class",a))},t.prototype.createOverlay=function(){var e=this;l=document.createElement("div"),l.setAttribute("class","overlay"),r=document.createElement("div"),r.setAttribute("class","previewImage"),i=document.createElement("img"),this.addClass(l,"hidden"),this.addClass(r,"hidden"),document.getElementsByTagName("body")[0].appendChild(l),document.getElementsByTagName("body")[0].appendChild(r),r.appendChild(i),r.addEventListener("click",function(){e.removeClass(l,"overlayShow"),e.removeClass(r,"previewShow"),e.addClass(l,"hidden"),e.addClass(r,"hidden")})},t.prototype.imageColumn=function(e){if(document.createElement)for(var t=0;e>t;t++)d[t]=document.createElement("ul"),d[t].setAttribute("class","waterfall waterfall-"+e),a.appendChild(d[t])},t.prototype.initAppendImage=function(){for(var e=0;c>e;e++)u[e]=0;var t=this;o.forEach(function(e){t.appendImage(e)})},t.prototype.getLowestColumn=function(){for(var e,t=999999,a=0;c>a;a++)u[a]=d[a].offsetHeight;for(var n=0;c>n;n++)u[n]<t&&(e=n,t=u[n]);return e},t.prototype.appendImage=function(e){var t,a,n=this.getLowestColumn();a=document.createElement("li"),t=document.createElement("img"),a.appendChild(t),t.setAttribute("src",e),d[n].appendChild(a),this.addClickEvent(t)},t.prototype.addClickEvent=function(e){var t=this;e.addEventListener("click",function(e){var a=e.target.getAttribute("src");i.setAttribute("src",a),t.removeClass(l,"hidden"),t.removeClass(r,"hidden"),t.addClass(l,"overlayShow"),t.addClass(r,"previewShow")})},e.onload=function(){"undefined"==typeof e.lucasAlbum&&(e.lucasAlbum=new t)}}(window);