!function(e){"use strict";function t(){this.LAYOUT={PUZZLE:1,WATERFALL:2,BARREL:3},this.init()}var a,s,n,i,l,o,r=[],d=5,c=[],u=[];t.prototype.init=function(){this.getAlbumElement(),this.imageColumn(d),this.createOverlay(),this.initAppendImage()},t.prototype.getAlbumElement=function(){var e;document.getElementsByClassName&&document.getElementsByClassName("lucas-album")[0]&&(a=document.getElementsByClassName("lucas-album")[0]),document.querySelectorAll&&0!==document.querySelectorAll(".lucas-album img").length&&(e=document.querySelectorAll(".lucas-album img"));for(var t=0;t<e.length;t++)r[t]=e[t].getAttribute("src"),a.removeChild(e[t]);n=this.LAYOUT[a.getAttribute("category")],s=r.length},t.prototype.addClass=function(e,t){var a,s="";e.getAttribute("class")?(a=e.getAttribute("class").split(" "),a.forEach(function(e){e!==t&&(s=s+" "+e)}),s=s.trim(),s=s+" "+t,e.setAttribute("class",s)):e.setAttribute("class",t)},t.prototype.removeClass=function(e,t){var a;e.getAttribute("class")&&(a=e.getAttribute("class"),a=a.replace(t,""),e.setAttribute("class",a))},t.prototype.createOverlay=function(){var e=this;i=document.createElement("div"),i.setAttribute("class","overlay"),o=document.createElement("div"),o.setAttribute("class","previewImage"),l=document.createElement("img"),l.setAttribute("class","imageHidden"),this.addClass(i,"hidden"),this.addClass(o,"hidden"),document.getElementsByTagName("body")[0].appendChild(i),document.getElementsByTagName("body")[0].appendChild(o),o.appendChild(l),o.addEventListener("click",function(){e.removeClass(i,"overlayShow"),e.removeClass(o,"previewShow"),e.removeClass(l,"imageShow"),e.addClass(i,"hidden"),e.addClass(o,"hidden"),e.addClass(l,"imageHidden")})},t.prototype.imageColumn=function(e){if(document.createElement)for(var t=0;e>t;t++)c[t]=document.createElement("ul"),c[t].setAttribute("class","waterfall waterfall-"+e),a.appendChild(c[t])},t.prototype.initAppendImage=function(){for(var e=0;d>e;e++)u[e]=0;var t=this;r.forEach(function(e){t.appendImage(e)})},t.prototype.getLowestColumn=function(){for(var e,t=999999,a=0;d>a;a++)u[a]=c[a].offsetHeight;for(var s=0;d>s;s++)u[s]<t&&(e=s,t=u[s]);return e},t.prototype.appendImage=function(e){var t,a,s=this.getLowestColumn();a=document.createElement("li"),t=document.createElement("img"),a.appendChild(t),t.setAttribute("src",e),c[s].appendChild(a),this.addClickEvent(t)},t.prototype.addClickEvent=function(e){var t=this;e.addEventListener("click",function(e){var a=e.target.getAttribute("src");l.setAttribute("src",a),t.removeClass(i,"hidden"),t.removeClass(o,"hidden"),t.removeClass(l,"imageHidden"),t.addClass(i,"overlayShow"),t.addClass(o,"previewShow"),t.addClass(l,"imageShow")})},e.onload=function(){"undefined"==typeof e.lucasAlbum&&(e.lucasAlbum=new t)}}(window);